@using Microsoft.Extensions.Logging
@using Microsoft.JSInterop
@inject IJSRuntime JSRuntime
@inject ILogger<InputManager> Logger
@inject KeyboardEventService KeyboardEventService

@code {
    private IJSObjectReference _module;

    protected override async Task OnInitializedAsync()
    {
        _module = await JSRuntime.InvokeAsync<IJSObjectReference>("import", "./_content/KeyBlazor/keyBlazorKeyboardEventListener.js");
        await _module.InvokeVoidAsync("addKeyboardEventListener");

        KeyboardEventService.KeyDown += HandleKeyDown;
        KeyboardEventService.KeyUp += HandleKeyUp;
        KeyboardEventService.KeyHeld += HandleKeyHeld;
    }

    public void HandleKeyDown(KeyboardEventArgs e)
    {
       
    }

    public void HandleKeyUp(KeyboardEventArgs e)
    {
        
    }

    public void HandleKeyHeld(KeyboardEventArgs e)
    {
    }

    public async ValueTask DisposeAsync()
    {
        if (_module != null)
        {
            await _module.DisposeAsync();
        }
        KeyboardEventService.KeyDown -= HandleKeyDown;
        KeyboardEventService.KeyUp -= HandleKeyUp;
        KeyboardEventService.KeyHeld -= HandleKeyHeld;
    }
}
